"use strict";(self.webpackChunkimmocare_frontend=self.webpackChunkimmocare_frontend||[]).push([[808],{8808:(O,l,s)=>{s.r(l),s.d(l,{BuildingFormComponent:()=>M});var m=s(177),e=s(4341),c=s(1413),a=s(6977),r=s(4438),u=s(7952),g=s(7282);function p(t,d){if(1&t&&(r.j41(0,"div",5),r.EFF(1),r.k0s()),2&t){const n=r.XpG();r.R7$(),r.SpI(" ",n.error," ")}}function f(t,d){1&t&&(r.j41(0,"div",6),r.EFF(1," Loading building... "),r.k0s())}function h(t,d){if(1&t&&(r.j41(0,"div",28),r.EFF(1),r.k0s()),2&t){const n=r.XpG(2);r.R7$(),r.SpI(" ",n.getErrorMessage("name")," ")}}function _(t,d){if(1&t&&(r.j41(0,"div",28),r.EFF(1),r.k0s()),2&t){const n=r.XpG(2);r.R7$(),r.SpI(" ",n.getErrorMessage("streetAddress")," ")}}function b(t,d){if(1&t&&(r.j41(0,"div",28),r.EFF(1),r.k0s()),2&t){const n=r.XpG(2);r.R7$(),r.SpI(" ",n.getErrorMessage("postalCode")," ")}}function E(t,d){if(1&t&&(r.j41(0,"div",28),r.EFF(1),r.k0s()),2&t){const n=r.XpG(2);r.R7$(),r.SpI(" ",n.getErrorMessage("city")," ")}}function C(t,d){if(1&t&&(r.j41(0,"div",28),r.EFF(1),r.k0s()),2&t){const n=r.XpG(2);r.R7$(),r.SpI(" ",n.getErrorMessage("country")," ")}}function F(t,d){if(1&t&&(r.j41(0,"div",28),r.EFF(1),r.k0s()),2&t){const n=r.XpG(2);r.R7$(),r.SpI(" ",n.getErrorMessage("ownerName")," ")}}function x(t,d){if(1&t){const n=r.RV6();r.j41(0,"form",7),r.bIt("ngSubmit",function(){r.eBV(n);const o=r.XpG();return r.Njj(o.onSubmit())}),r.j41(1,"div",8)(2,"label",9),r.EFF(3," Building Name "),r.j41(4,"span",10),r.EFF(5,"*"),r.k0s()(),r.nrm(6,"input",11),r.DNE(7,h,2,1,"div",12),r.k0s(),r.j41(8,"div",8)(9,"label",13),r.EFF(10," Street Address "),r.j41(11,"span",10),r.EFF(12,"*"),r.k0s()(),r.nrm(13,"input",14),r.DNE(14,_,2,1,"div",12),r.k0s(),r.j41(15,"div",15)(16,"div",8)(17,"label",16),r.EFF(18," Postal Code "),r.j41(19,"span",10),r.EFF(20,"*"),r.k0s()(),r.nrm(21,"input",17),r.DNE(22,b,2,1,"div",12),r.k0s(),r.j41(23,"div",8)(24,"label",18),r.EFF(25," City "),r.j41(26,"span",10),r.EFF(27,"*"),r.k0s()(),r.nrm(28,"input",19),r.DNE(29,E,2,1,"div",12),r.k0s()(),r.j41(30,"div",8)(31,"label",20),r.EFF(32," Country "),r.j41(33,"span",10),r.EFF(34,"*"),r.k0s()(),r.nrm(35,"input",21),r.DNE(36,C,2,1,"div",12),r.k0s(),r.j41(37,"div",8)(38,"label",22),r.EFF(39," Owner Name "),r.k0s(),r.nrm(40,"input",23),r.DNE(41,F,2,1,"div",12),r.j41(42,"small",24),r.EFF(43,"Optional"),r.k0s()(),r.j41(44,"div",25)(45,"button",26),r.bIt("click",function(){r.eBV(n);const o=r.XpG();return r.Njj(o.onCancel())}),r.EFF(46," Cancel "),r.k0s(),r.j41(47,"button",27),r.EFF(48),r.k0s()()()}if(2&t){const n=r.XpG();r.Y8G("formGroup",n.buildingForm),r.R7$(6),r.AVh("error",n.hasError("name","required")||n.hasError("name","maxlength")),r.R7$(),r.Y8G("ngIf",n.hasError("name","required")||n.hasError("name","maxlength")),r.R7$(6),r.AVh("error",n.hasError("streetAddress","required")||n.hasError("streetAddress","maxlength")),r.R7$(),r.Y8G("ngIf",n.hasError("streetAddress","required")||n.hasError("streetAddress","maxlength")),r.R7$(7),r.AVh("error",n.hasError("postalCode","required")||n.hasError("postalCode","maxlength")),r.R7$(),r.Y8G("ngIf",n.hasError("postalCode","required")||n.hasError("postalCode","maxlength")),r.R7$(6),r.AVh("error",n.hasError("city","required")||n.hasError("city","maxlength")),r.R7$(),r.Y8G("ngIf",n.hasError("city","required")||n.hasError("city","maxlength")),r.R7$(6),r.AVh("error",n.hasError("country","required")||n.hasError("country","maxlength")),r.R7$(),r.Y8G("ngIf",n.hasError("country","required")||n.hasError("country","maxlength")),r.R7$(4),r.AVh("error",n.hasError("ownerName","maxlength")),r.R7$(),r.Y8G("ngIf",n.hasError("ownerName","maxlength")),r.R7$(6),r.Y8G("disabled",n.loading),r.R7$(),r.SpI(" ",n.loading?"Saving...":"Save"," ")}}let M=(()=>{class t{constructor(n,i,o,v){this.fb=n,this.buildingService=i,this.route=o,this.router=v,this.isEditMode=!1,this.loading=!1,this.error=null,this.hasUnsavedChanges=!1,this.destroy$=new c.B,this.buildingForm=this.fb.group({name:["",[e.k0.required,e.k0.maxLength(100)]],streetAddress:["",[e.k0.required,e.k0.maxLength(200)]],postalCode:["",[e.k0.required,e.k0.maxLength(20)]],city:["",[e.k0.required,e.k0.maxLength(100)]],country:["Belgium",[e.k0.required,e.k0.maxLength(100)]],ownerName:["",[e.k0.maxLength(200)]]})}ngOnInit(){this.route.params.pipe((0,a.Q)(this.destroy$)).subscribe(n=>{n.id&&(this.isEditMode=!0,this.buildingId=+n.id,this.loadBuilding(this.buildingId))}),this.buildingForm.valueChanges.pipe((0,a.Q)(this.destroy$)).subscribe(()=>{this.hasUnsavedChanges=!0})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadBuilding(n){this.loading=!0,this.buildingService.getBuildingById(n).pipe((0,a.Q)(this.destroy$)).subscribe({next:i=>{this.buildingForm.patchValue(i),this.loading=!1},error:()=>{this.error="Failed to load building",this.loading=!1}})}onSubmit(){if(this.buildingForm.invalid)return void this.buildingForm.markAllAsTouched();this.loading=!0,this.error=null;const n=this.buildingForm.value;(this.isEditMode&&this.buildingId?this.buildingService.updateBuilding(this.buildingId,n):this.buildingService.createBuilding(n)).pipe((0,a.Q)(this.destroy$)).subscribe({next:o=>{this.router.navigate(["/buildings",o.id])},error:()=>{this.error="Failed to save building",this.loading=!1}})}onCancel(){this.router.navigate(["/buildings"])}hasError(n,i){const o=this.buildingForm.get(n);return!(!o||!o.hasError(i)||!o.dirty&&!o.touched)}getErrorMessage(n){const i=this.buildingForm.get(n);return i?i.hasError("required")?`${n} is required`:i.hasError("maxlength")?`${n} is too long`:"":""}static{this.\u0275fac=function(i){return new(i||t)(r.rXU(e.ok),r.rXU(u.Q),r.rXU(g.nX),r.rXU(g.Ix))}}static{this.\u0275cmp=r.VBU({type:t,selectors:[["app-building-form"]],standalone:!0,features:[r.aNF],decls:7,vars:4,consts:[[1,"building-form-container"],[1,"header"],["class","alert alert-error",4,"ngIf"],["class","loading",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-error"],[1,"loading"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","name"],[1,"required"],["type","text","id","name","formControlName","name"],["class","error-message",4,"ngIf"],["for","streetAddress"],["type","text","id","streetAddress","formControlName","streetAddress"],[1,"form-row"],["for","postalCode"],["type","text","id","postalCode","formControlName","postalCode"],["for","city"],["type","text","id","city","formControlName","city"],["for","country"],["type","text","id","country","formControlName","country"],["for","ownerName"],["type","text","id","ownerName","formControlName","ownerName"],[1,"help-text"],[1,"form-actions"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"error-message"]],template:function(i,o){1&i&&(r.j41(0,"div",0)(1,"div",1)(2,"h1"),r.EFF(3),r.k0s()(),r.DNE(4,p,2,1,"div",2)(5,f,2,0,"div",3)(6,x,49,21,"form",4),r.k0s()),2&i&&(r.R7$(3),r.JRh(o.isEditMode?"Edit Building":"Create Building"),r.R7$(),r.Y8G("ngIf",o.error),r.R7$(),r.Y8G("ngIf",o.loading&&o.isEditMode),r.R7$(),r.Y8G("ngIf",!o.loading||!o.isEditMode))},dependencies:[m.MD,m.bT,e.X1,e.qT,e.me,e.BC,e.cb,e.j4,e.JD],styles:[".building-form-container[_ngcontent-%COMP%]{padding:2rem;max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{margin-bottom:2rem}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:2rem;color:#333}.alert[_ngcontent-%COMP%]{padding:1rem;border-radius:4px;margin-bottom:1.5rem}.alert.alert-error[_ngcontent-%COMP%]{background-color:#f8d7da;border:1px solid #f5c6cb;color:#721c24}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#666;font-size:1.1rem}form[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#dc3545}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .2s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.form-group[_ngcontent-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#dc3545}.form-group[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.form-group[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{display:block;color:#6c757d;font-size:.875rem;margin-top:.25rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}@media (max-width: 768px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem;padding-top:1.5rem;border-top:1px solid #dee2e6}.btn[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:1rem;cursor:pointer;transition:all .2s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0056b3}.btn.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#5a6268}@media (max-width: 768px){.building-form-container[_ngcontent-%COMP%]{padding:1rem}form[_ngcontent-%COMP%]{padding:1.5rem}.form-actions[_ngcontent-%COMP%]{flex-direction:column-reverse}.form-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}}"]})}}return t})()}}]);