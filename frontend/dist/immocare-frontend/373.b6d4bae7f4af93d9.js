"use strict";(self.webpackChunkimmocare_frontend=self.webpackChunkimmocare_frontend||[]).push([[373],{8373:(M,_,i)=>{i.r(_),i.d(_,{UserListComponent:()=>F});var c=i(177),t=i(4438),g=i(3443),d=i(7282);function p(n,s){if(1&n&&(t.j41(0,"div",7),t.EFF(1),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.JRh(e.errorMessage)}}function u(n,s){1&n&&(t.j41(0,"div",8),t.EFF(1,"Loading\u2026"),t.k0s())}function m(n,s){if(1&n){const e=t.RV6();t.j41(0,"tr",15),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(3);return t.Njj(a.navigateTo(o))}),t.j41(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"span",16),t.EFF(7),t.k0s()(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"date"),t.k0s()()}if(2&n){const e=s.$implicit;t.R7$(2),t.JRh(e.username),t.R7$(2),t.JRh(e.email),t.R7$(3),t.JRh(e.role),t.R7$(2),t.JRh(t.i5U(10,4,e.createdAt,"yyyy-MM-dd HH:mm"))}}function b(n,s){if(1&n){const e=t.RV6();t.j41(0,"table",12)(1,"thead")(2,"tr")(3,"th",13),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.sort("username"))}),t.EFF(4," Username "),t.j41(5,"span"),t.EFF(6),t.k0s()(),t.j41(7,"th",13),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.sort("email"))}),t.EFF(8," Email "),t.j41(9,"span"),t.EFF(10),t.k0s()(),t.j41(11,"th",13),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.sort("role"))}),t.EFF(12," Role "),t.j41(13,"span"),t.EFF(14),t.k0s()(),t.j41(15,"th",13),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.sort("createdAt"))}),t.EFF(16," Created At "),t.j41(17,"span"),t.EFF(18),t.k0s()()()(),t.j41(19,"tbody"),t.DNE(20,m,11,7,"tr",14),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(6),t.JRh(e.sortIcon("username")),t.R7$(4),t.JRh(e.sortIcon("email")),t.R7$(4),t.JRh(e.sortIcon("role")),t.R7$(4),t.JRh(e.sortIcon("createdAt")),t.R7$(2),t.Y8G("ngForOf",e.pagedUsers)}}function f(n,s){1&n&&(t.j41(0,"p",17),t.EFF(1,"No users found."),t.k0s())}function h(n,s){if(1&n){const e=t.RV6();t.j41(0,"button",21),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG(3);return t.Njj(a.goToPage(o))}),t.EFF(1),t.k0s()}if(2&n){const e=s.$implicit,r=t.XpG(3);t.AVh("btn--active",e===r.currentPage),t.R7$(),t.SpI(" ",e," ")}}function C(n,s){if(1&n){const e=t.RV6();t.j41(0,"div",18)(1,"button",19),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.goToPage(o.currentPage-1))}),t.EFF(2," \xab Prev "),t.k0s(),t.DNE(3,h,2,3,"button",20),t.j41(4,"button",19),t.bIt("click",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.goToPage(o.currentPage+1))}),t.EFF(5," Next \xbb "),t.k0s()()}if(2&n){const e=t.XpG(2);t.R7$(),t.Y8G("disabled",1===e.currentPage),t.R7$(2),t.Y8G("ngForOf",e.pages()),t.R7$(),t.Y8G("disabled",e.currentPage===e.totalPages)}}function P(n,s){if(1&n&&(t.j41(0,"p",22),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.E5c(" Showing ",(e.currentPage-1)*e.pageSize+1,"\u2013",e.endIndex," of ",e.users.length," users ")}}function k(n,s){if(1&n&&(t.qex(0),t.DNE(1,b,21,5,"table",9)(2,f,2,0,"ng-template",null,0,t.C5r)(4,C,6,3,"div",10)(5,P,2,3,"p",11),t.bVm()),2&n){const e=t.sdS(3),r=t.XpG();t.R7$(),t.Y8G("ngIf",r.users.length>0)("ngIfElse",e),t.R7$(3),t.Y8G("ngIf",r.totalPages>1),t.R7$(),t.Y8G("ngIf",r.users.length>0)}}let F=(()=>{class n{constructor(e,r){this.userService=e,this.router=r,this.users=[],this.loading=!1,this.errorMessage="",this.sortField="username",this.sortDir="asc",this.pageSize=20,this.currentPage=1}ngOnInit(){this.load()}load(){this.loading=!0,this.userService.getAll().subscribe({next:e=>{this.users=e,this.loading=!1},error:()=>{this.errorMessage="Failed to load users.",this.loading=!1}})}sort(e){this.sortField===e?this.sortDir="asc"===this.sortDir?"desc":"asc":(this.sortField=e,this.sortDir="asc"),this.currentPage=1}get sortedUsers(){return[...this.users].sort((e,r)=>{const o=String(e[this.sortField]??"").toLowerCase(),a=String(r[this.sortField]??"").toLowerCase(),l=o.localeCompare(a);return"asc"===this.sortDir?l:-l})}get totalPages(){return Math.max(1,Math.ceil(this.users.length/this.pageSize))}get pagedUsers(){const e=(this.currentPage-1)*this.pageSize;return this.sortedUsers.slice(e,e+this.pageSize)}get endIndex(){return Math.min(this.currentPage*this.pageSize,this.users.length)}pages(){return Array.from({length:this.totalPages},(e,r)=>r+1)}goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)}navigateTo(e){this.router.navigate(["/users",e.id])}create(){this.router.navigate(["/users/new"])}sortIcon(e){return this.sortField!==e?"\u2195":"asc"===this.sortDir?"\u2191":"\u2193"}static{this.\u0275fac=function(r){return new(r||n)(t.rXU(g.D),t.rXU(d.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-user-list"]],standalone:!0,features:[t.aNF],decls:9,vars:3,consts:[["empty",""],[1,"user-list"],[1,"user-list__header"],[1,"btn","btn--primary",3,"click"],["class","alert alert--error",4,"ngIf"],["class","loading",4,"ngIf"],[4,"ngIf"],[1,"alert","alert--error"],[1,"loading"],["class","table",4,"ngIf","ngIfElse"],["class","pagination",4,"ngIf"],["class","pagination__info",4,"ngIf"],[1,"table"],[1,"sortable",3,"click"],["class","table__row--clickable",3,"click",4,"ngFor","ngForOf"],[1,"table__row--clickable",3,"click"],[1,"badge","badge--role"],[1,"empty-state"],[1,"pagination"],[1,"btn","btn--sm",3,"click","disabled"],["class","btn btn--sm",3,"btn--active","click",4,"ngFor","ngForOf"],[1,"btn","btn--sm",3,"click"],[1,"pagination__info"]],template:function(r,o){1&r&&(t.j41(0,"div",1)(1,"div",2)(2,"h1"),t.EFF(3,"Users"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return o.create()}),t.EFF(5,"+ Create User"),t.k0s()(),t.DNE(6,p,2,1,"div",4)(7,u,2,0,"div",5)(8,k,6,4,"ng-container",6),t.k0s()),2&r&&(t.R7$(6),t.Y8G("ngIf",o.errorMessage),t.R7$(),t.Y8G("ngIf",o.loading),t.R7$(),t.Y8G("ngIf",!o.loading))},dependencies:[c.MD,c.Sq,c.bT,c.vh],styles:[".user-list[_ngcontent-%COMP%]{padding:1.5rem}.user-list__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.25rem}.user-list__header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.9rem}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem 1rem;text-align:left;border-bottom:1px solid #e5e7eb}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f9fafb;font-weight:600;color:#374151;white-space:nowrap}.table__row--clickable[_ngcontent-%COMP%]{cursor:pointer}.table__row--clickable[_ngcontent-%COMP%]:hover{background:#f3f4f6}.sortable[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;user-select:none}.sortable[_ngcontent-%COMP%]:hover{color:#2563eb}.sortable[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:4px;opacity:.6}.badge--role[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;border-radius:9999px;background:#dbeafe;color:#1d4ed8;font-size:.75rem;font-weight:600}.pagination[_ngcontent-%COMP%]{display:flex;gap:.25rem;margin-top:1rem;align-items:center}.pagination__info[_ngcontent-%COMP%]{margin-top:.5rem;color:#6b7280;font-size:.85rem}.btn[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:6px;border:1px solid transparent;cursor:pointer;font-size:.875rem;font-weight:500}.btn--primary[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border-color:#2563eb}.btn--primary[_ngcontent-%COMP%]:hover{background:#1d4ed8}.btn--sm[_ngcontent-%COMP%]{padding:.3rem .6rem;border:1px solid #d1d5db;background:#fff}.btn--sm[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6}.btn--active[_ngcontent-%COMP%]{background:#2563eb;color:#fff;border-color:#2563eb}.btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed}.alert--error[_ngcontent-%COMP%]{padding:.75rem 1rem;background:#fef2f2;color:#dc2626;border:1px solid #fecaca;border-radius:6px;margin-bottom:1rem}.loading[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{color:#6b7280;padding:2rem 0;text-align:center}"]})}}return n})()}}]);